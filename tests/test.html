<!DOCTYPE html>
<html lang="en">
<head>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,300,400' rel='stylesheet' type='text/css'>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="../d3lines.js"></script>
    <style>
        svg {
            padding: 5px;
            font-family: 'Open Sans', Palatino;
            font-weight: 300;
            border: 1px solid red;
        }
    </style>
</head>
<body>
    <svg id="main-svg"></svg>
    <svg id="main-svg2"></svg>
</body>

<script>
    isArray = d3lines.isArray;
    function multiplePlotLayout(parentID, layout){
        for (jrow in layout){
            var div = document.createElement("div");
            var rowID = parentID+"_div_r"+jrow;
            div.setAttribute("id", rowID);
            div.setAttribute("class", "d3lines-layout-row");
//             div.style.clear = "both";
            document.getElementById(parentID).appendChild(div);
            var row = layout[jrow];
            if (isArray(row))
                {for (jcol in row){
                    var div = document.createElement("div");
                    var colID = rowID+"c"+jcol;
                    div.setAttribute("id", colID);
                    div.setAttribute("class", "d3lines-layout-column");
//                     div.style.float = "left";
                    document.getElementById(rowID).appendChild(div);
                    if (isArray(row[jcol])){
                        multiplePlotLayout(colID, layout);
                    } else {
                        var svg = document.createElement("svg");
                        svg.setAttribute("id", parentID+"_svg_r"+jrow+"c"+jcol);
                        svg.setAttribute("class", "d3lines-layout-svg");
                        document.getElementById(colID).appendChild(svg);
                    }
                }
            }
        }
    }

    function clearContent(elementID)
    {
        document.getElementById(elementID).innerHTML = "";
    }

    d3.selection.prototype.moveToFront = function() {
      return this.each(function(){
        this.parentNode.appendChild(this);
      });
    };

var svg = d3.select("#main-svg");
var plt, plt2

d3.csv("example2.csv", function(error, data) {

    var D = new d3lines.Data([{date: "Jan 3, 2017", x: "3.5", category: "AAA"},
                    {date: "Jan 7, 2017", x: "7.1", category: "BBB"},
                    {date: "Jan 13, 2017", x: "some_string", category: "CCC"}]).sanitize()

    var options = {
        data: D.removeNaNColumns(),
        xkey: "date",
        xscale_type: "time"
    };
    plt = d3lines.plot(svg, options);
});

var svg2 = d3.select("#main-svg2");

d3.csv("example_transpose.csv", function(error, data) {
    var D = new d3lines.Data(data)
        .transpose("", "Year")

    var options = {
        data: D,
        xkey: "Year",
        xticks: 5,
    };
    plt = d3lines.plot(svg2, options);
});

</script>

</html>