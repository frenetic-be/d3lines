<!DOCTYPE html>
<html lang="en">
<head>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,300,400' rel='stylesheet' type='text/css'>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="../d3lines.js"></script>
    <style>
        svg {
            padding: 5px;
            font-family: 'Open Sans', Palatino;
            font-weight: 300;
            border: 1px solid red;
        }
    </style>
</head>
<body>
    <svg id="main-svg"></svg>
    <svg id="main-svg2"></svg>
</body>

<script>
    isArray = d3lines.isArray;
    function multiplePlotLayout(parentID, layout){
        for (jrow in layout){
            var div = document.createElement("div");
            var rowID = parentID+"_div_r"+jrow;
            div.setAttribute("id", rowID);
            div.setAttribute("class", "d3lines-layout-row");
//             div.style.clear = "both";
            document.getElementById(parentID).appendChild(div);
            var row = layout[jrow];
            if (isArray(row))
                {for (jcol in row){
                    var div = document.createElement("div");
                    var colID = rowID+"c"+jcol;
                    div.setAttribute("id", colID);
                    div.setAttribute("class", "d3lines-layout-column");
//                     div.style.float = "left";
                    document.getElementById(rowID).appendChild(div);
                    if (isArray(row[jcol])){
                        multiplePlotLayout(colID, layout);
                    } else {
                        var svg = document.createElement("svg");
                        svg.setAttribute("id", parentID+"_svg_r"+jrow+"c"+jcol);
                        svg.setAttribute("class", "d3lines-layout-svg");
                        document.getElementById(colID).appendChild(svg);
                    }
                }
            }
        }
    }

    function clearContent(elementID)
    {
        document.getElementById(elementID).innerHTML = "";
    }

    d3.selection.prototype.moveToFront = function() {
      return this.each(function(){
        this.parentNode.appendChild(this);
      });
    };

var svg = d3.select("#main-svg");
var plt, plt2
//
// // Create data
// var npts = 100;
// var x = Array.apply(null, Array(npts)).map(function (_, i) {return i/(npts-1)*6*Math.PI;});
// var y = Array.apply(null, Array(npts)).map(function (_, i) {return Math.sin(x[i]);});
// data = {x: x, y: y};
// // Select svg tag
// var svg = d3.select("#main-svg");
// // plot data
// d3lines.plot(svg, {data: data, xkey: "x"});

// var svg2 = d3.select("#main-svg2");

d3.csv("iris.csv", function(error, data) {
    var D = new d3lines.Data(data)
        .selectColumns(["Petal Width", "Petal Length", "Species"])

    var options = {
        plot_type: "scatter",
    };
    plt = d3lines.groupByPlot(svg, D, "Petal Width", "Species", options);
});

</script>

</html>