<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>d3lines</title>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,300,400' rel='stylesheet' type='text/css'>
    <link href='d3lines.css' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="prettify.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!--     <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script> -->
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<!--     <script src="https://frenetic.be/d3lines/d3lines.min.js"></script> -->
    <script src="../d3lines.js"></script>
    <script src="prettify.js"></script>
</head>
<body>

<div class="container">
  <section class="background">
    <div class="content-wrapper">
      <p class="content-title">d3lines</p>
      <p class="content-subtitle">simple line charts on your website with just a few lines of code</p>
    </div>
    <div class="arrow arrow-up"></div>
    <div class="arrow arrow-down"><i class="down"></i></div>
    <div class="navigation-bar">
        <ul class="navigation-menu">
<!--             <li class="navigation-menu"><a>Home</a></li> -->
            <li class="navigation-menu"><a class="examples">Examples</a></li>
            <li class="navigation-menu"><a class="installation">Installation</a></li>
            <li class="navigation-menu"><a href="https://github.com/frenetic-be/d3lines">Source</a></li>
            <li class="navigation-menu"><a href="https://github.com/frenetic-be/d3lines/blob/master/API/d3lines.md">API</a></li>
            <li class="navigation-menu"><a href="https://frenetic.be/d3lines/d3lines.js" download>Download</a></li>

        </ul>
    </div>
  </section>
  <section class="background">
    <div class="content-wrapper">
        <div class="statement">
            <span class="d3lines">d3lines</span> is a JavaScript library to display simple line charts on your website.
            <br>It is based on the amazing data visualization library <a href="http://d3js.org/">D3.js</a>.
            <br><br>
            <span class="d3lines">d3lines</span> allows you to create beautiful line charts
            <br>with <em>just a few lines of code</em>.
            <br><br>
            <span class="d3lines">d3lines</span> is designed for simplicity.
        </div>
    </div>
    <div class="arrow arrow-up"><i class="up"></i></div>
    <div class="arrow arrow-down"><i class="down"></i></div>
  </section>
  <section class="background">
    <div class="content-wrapper">
        <div class="example-main">
            <div class="example-container">
                <div class="example-menu">
                    <ul>
                        <li class="selected-menu"><a data-id="0">Basic plot</a></li>
                        <li><a data-id="1">Multiple lines</a></li>
                        <li><a data-id="2">Double Y-axes</a></li>
                        <li><a data-id="3">Incomplete dataset</a></li>
                        <li><a data-id="4">Axes formatting</a></li>
                        <li><a data-id="5">Log scale</a></li>
                        <li><a data-id="6">Group-by plot</a></li>
                        <li><a data-id="7">Interpolation</a></li>
                    </ul>
                </div>
                <div class="right-container">
                    <div class="chart-container">
                        <div class="svg-container">
                            <svg id="svg-main"></svg>
                        </div>
                        <div class="code-container">
                            <pre class="prettyprint" id="code"></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="arrow arrow-up"><i class="up"></i></div>
    <div class="arrow arrow-down"><i class="down"></i></div>
  </section>
  <section class="background">
    <div class="content-wrapper">
        <div class="statement">
            In order to use d3lines, you need to include <a href="http://d3js.org/">D3.v3</a>:
            <pre class="prettyprint">&lt;script src="http://d3js.org/d3.v3.min.js" charset="utf-8"&gt;&lt;/script&gt;</pre>
            Then, you can either <a href="https://frenetic.be/d3lines/d3lines.js" download>download the script</a> (or <a href="https://frenetic.be/d3lines/d3lines.min.js" download> the minimized version</a>) and include it on your page:
            <pre class="prettyprint">&lt;script src="d3lines.js" charset="utf-8"&gt;&lt;/script&gt;</pre>
            You can also link directly to the latest release:
            <pre class="prettyprint">&lt;script src="https://frenetic.be/d3lines/d3lines.js"&gt;&lt;/script&gt;</pre>
            or:
            <pre class="prettyprint">&lt;script src="https://frenetic.be/d3lines/d3lines.min.js"&gt;&lt;/script&gt;</pre>

        </div>
    </div>
    <div class="arrow arrow-up"><i class="up"></i></div>
    <div class="arrow arrow-down"></div>
  </section>

</div>

</body>

<script>
var plt;
$(document).ready(function(){
    // ------------- VARIABLES ------------- //
    var ticking = false;
    var isFirefox = (/Firefox/i.test(navigator.userAgent));
    var isIe = (/MSIE/i.test(navigator.userAgent)) || (/Trident.*rv\:11\./i.test(navigator.userAgent));
    var scrollSensitivitySetting = 30; //Increase/decrease this number to change sensitivity to trackpad gestures (up = less sensitive; down = more sensitive)
    var slideDurationSetting = 600; //Amount of time for which slide is "locked"
    var fromTop = false;
    var currentSlideNumber = 0;
    var totalSlideNumber = $(".background").length;

    // ------------- DETERMINE DELTA/SCROLL DIRECTION ------------- //
    function parallaxScroll(evt) {
      if (evt.target === document.getElementById("svg-main")) {
        return;
      }
      if (isFirefox) {
        //Set delta for Firefox
        delta = evt.detail * (-120);
      } else if (isIe) {
        //Set delta for IE
        delta = -evt.deltaY;
      } else {
        //Set delta for all other browsers
        delta = evt.wheelDelta;
      }

      if (ticking != true) {
        if (delta <= -scrollSensitivitySetting) {
          //Down scroll
          ticking = true;
          if (currentSlideNumber !== totalSlideNumber - 1) {
            currentSlideNumber++;
            nextItem();
          }
          slideDurationTimeout(slideDurationSetting);
        }
        if (delta >= scrollSensitivitySetting) {
          //Up scroll
          ticking = true;
          if (currentSlideNumber !== 0) {
            currentSlideNumber--;
          }
          previousItem();
          slideDurationTimeout(slideDurationSetting);
        }
      }
    }

    // ------------- SET TIMEOUT TO TEMPORARILY "LOCK" SLIDES ------------- //
    function slideDurationTimeout(slideDuration) {
      setTimeout(function() {
        ticking = false;
      }, slideDuration);
    }

    // ------------- ADD EVENT LISTENER ------------- //
    // var mousewheelEvent = isFirefox ? "DOMMouseScroll" : "wheel";
    // window.addEventListener(mousewheelEvent, _.throttle(parallaxScroll, 60), false);

    // ------------- SLIDE MOTION ------------- //
    function nextItem() {
        var $previousSlide = $(".background").eq(currentSlideNumber - 1);
        $previousSlide.removeClass("up-scroll").addClass("down-scroll");
    }

    function previousItem() {
        if (fromTop) {
            $(".background").removeClass("down-scroll");
        }
        var $currentSlide = $(".background").eq(currentSlideNumber);
        $currentSlide.removeClass("down-scroll").addClass("up-scroll");
    }

    var svg = d3.select("#svg-main");
    plt = d3lines.Chart(svg);

    function loadChart(dataID){

        switch (dataID) {

////////////////
// Basic plot //
////////////////

            case 0:
                var npts = 100;
                var x = Array.apply(null, Array(npts)).map(function (_, i) {return i/(npts-1)*2*Math.PI;});
                var sin = Array.apply(null, Array(npts)).map(function (_, i) {return Math.sin(x[i]);});
                var cos = Array.apply(null, Array(npts)).map(function (_, i) {return Math.cos(x[i]);});
                var data = {
                    x: x,
                    sin: sin,
                    cos: cos
                };
                var options = {
                    data: data,
                    xkey: "x",
                    legend_position: "bottom left"
                }
                var code = `var data = {
    x: [...],
    sin: [...],
    cos: [...]
};
var options = {
    data: data,
    xkey: "x",
    legend_position: "bottom left"
}
d3lines.plot(svg, options);`;

               $('pre#code').html(code)
                    .removeClass("prettyprinted");

                prettyPrint();

                plt.svg.removeAll();
                plt = d3lines.plot(svg, options);
                break;

/////////////////
// Multi-lines //
/////////////////

            case 1:
                d3.csv('multilines2.csv', function(error, data) {
                    var options = {
                        data: data,
                        xkey: "Date",
                        line_color: ["steelblue","orange","limegreen"],
                        axes_font_size: "0.9em",
                        xscale_type: "time",
                        ylabel: "Some normalized data",
                    };
                    code = `var options = {
    data: data,
    xkey: "Date",
    line_color: [
        "steelblue",
        "orange",
        "limegreen"
    ],
    axes_font_size: "0.9em",
    xscale_type: "time",
    ylabel: "Some normalized data"
}
d3lines.plot(svg, options);`;

                   $('pre#code').html(code)
                        .removeClass("prettyprinted");

                    prettyPrint();

                    plt.svg.removeAll();
                    plt = d3lines.plot(svg, options);
                });
                break;

///////////////////
// Double y-axes //
///////////////////

            case 2:
                d3.csv('TempHum_20170413.txt', function(error, data) {
                    data.forEach(function(d, i) {
                        d.Time = d3.time.format("%Y-%m-%d %H:%M:%S").parse(d.Time.split(".")[0]);
                    });
                    var options = {
                        data: data,
                        xkey: "Time",
                        plot_type: "stack",
                        line_yaxis: ["right", "left"],
                        line_width: 0,
                        marker: ["o", "^"],
                        marker_size: 3,
                        xscale_type: "time",
                        ytick_format: function(d){return d+" °C";},
                        ylabel: "Temperature",
                        y2scale_type: "linear",
                        y2tick_format: function(d){return d+"%";},
                        y2label: "Humidity",
                        legend_position: "bottom left"
                    };
                    code = `var options = {
    data: data,
    xkey: "Time",
    plot_type: "stack",
    line_yaxis: ["right", "left"],
    line_width: 0,
    marker: ["o", "^"],
    marker_size: 3,
    xscale_type: "time",
    ytick_format: function(d){
        return d+" °C";
    },
    ylabel: "Temperature",
    y2scale_type: "linear",
    y2tick_format: function(d){
        return d+"%";
    },
    y2label: "Humidity",
    legend_position: "bottom left"
};
d3lines.plot(svg, options);`;

                   $('pre#code').html(code)
                        .removeClass("prettyprinted");

                    prettyPrint();

                    plt.svg.removeAll();
                    plt = d3lines.plot(svg, options);
                });
                break;

////////////////////////
// Incomplete dataset //
////////////////////////

            case 3:
                d3.csv('WDIFoodImports.csv', function(error, data) {
                    var options = {
                        data: data,
                        xkey: "Year",
                        line_width: 1,
                        marker: ["o", "^", "+", "s"],
                        marker_fill: "color",
                        marker_fill_opacity: 0.2,
                        marker_size: 5,
                        legend_position: "top right",
                    };
                    code = `var options = {
    data: data,
    xkey: "Year",
    line_width: 1,
    marker: ["o", "^", "+", "s"],
    marker_fill: "color",
    marker_fill_opacity: 0.2,
    marker_size: 5,
    legend_position: "top right"
};
d3lines.plot(svg, options);`;

                   $('pre#code').html(code)
                        .removeClass("prettyprinted");

                    prettyPrint();

                    plt.svg.removeAll();
                    plt = d3lines.plot(svg, options);
                });
                break;

/////////////////////
// Axes formatting //
/////////////////////

            case 4:
                d3.csv('WDIMortality.csv', function(error, data) {
                    var options = {
                        data: data,
                        xkey: "Year",
                        line_fill: "color",
                        line_fill_opacity: 0.1,
                        box: false,
                        axes_color: "lightsteelblue",
                        axes_width: 0.5,
                        axes_font_color: "steelblue",
                        xlim: [1960,2015],
                        xtick_format: function(d){return ""+d;},
                        ytick_format: function(d){return d/1e6;},
                        ylabel: "Some big number (x 10^6)",
                        legend_position: "top right",
                    };

                    code = `var options = {
    data: data,
    xkey: "Year",
    line_fill: "color",
    line_fill_opacity: 0.1,
    box: false,
    axes_color: "lightsteelblue",
    axes_width: 0.5,
    axes_font_color: "steelblue",
    xlim: [1960,2015],
    xtick_format: function(d){
        return ""+d;
    },
    ytick_format: function(d){
        return d/1e6;
    },
    ylabel: "Some big number (x 10^6)",
    legend_position: "top right"
};

d3lines.plot(svg, options);`;

                   $('pre#code').html(code)
                        .removeClass("prettyprinted");

                    prettyPrint();

                    plt.svg.removeAll();
                    plt = d3lines.plot(svg, options);
                });
                break;

///////////////
// Log scale //
///////////////

            case 5:
                d3.csv('CoalConsumption.csv', function(error, data) {
                    data = new d3lines.Data(data)
                                .transpose("", "Year")
                                .sample(7)
                    var options = {
                        data: data,
                        xkey: "Year",
                        yscale_type: "log",
                        ygrid: true,
                        legend_position: "[90, 150]"
                    };

                    code = `var options = {
    data: data,
    xkey: "Year",
    yscale_type: "log",
    ygrid: true,
    legend_position: "[90, 150]"
};

d3lines.plot(svg, options);`;

                   $('pre#code').html(code)
                        .removeClass("prettyprinted");

                    prettyPrint();

                    plt.svg.removeAll();
                    plt = d3lines.plot(svg, options);
                });
                break;


/////////////////
// groupByPlot //
/////////////////

            case 6:
                d3.csv('iris.csv', function(error, data) {
                    data = new d3lines.Data(data)
                        .ignoreColumns(["Petal Width", "Petal Length"])
                    var options = {
                        plot_type: "scatter",
                        ylabel: "Sepal Length",
                        legend_labels: ["I. Setosa", "I. Versicolor", "I. Virginica"],
//                         interactive_options: {
//                             dots: false,
//                             line: false,
//                         }
                    };

                    code = `var options = {
    plot_type: "scatter",
    ylabel: "Sepal Length",
    legend_labels: [
        "I. Setosa",
        "I. Versicolor",
        "I. Virginica"
    ],
};

plt = d3lines.groupByPlot(svg,
    data,
    "Sepal Width",
    "Species",
    options
);`;

                       $('pre#code').html(code)
                            .removeClass("prettyprinted");

                        prettyPrint();

                       plt.svg.removeAll();
                       plt = d3lines.groupByPlot(svg, data, "Sepal Width", "Species", options);

                });
                break;

///////////////////
// Interpolation //
///////////////////

                case 7:
                    data = {
                        monotone: [5,7,9,23,4,6,3,5,7,8],
                        step: [5,7,9,23,4,6,3,5,7,8],
                        cardinal: [5,7,9,23,4,6,3,5,7,8],
                        basis: [5,7,9,23,4,6,3,5,7,8],
                        linear: [5,7,9,23,4,6,3,5,7,8]
                    };
                    var options = {
                        data: data,
                        marker: ['','','','','o'],
                        marker_fill: "color",
                        line_color: [
                            "red", "limegreen", "magenta", "black", "blue"
                        ],
                        line_style: ["-", ":", "--", "-."],
                        line_interpolation: ["monotone", "step", "cardinal", "basis", "linear"],
                        interactive_options: {
                            line: false,
                            dots: false,
                            textbox: false,
                        }
                    };
                    code = `var options = {
    data: data,
    marker: ['','','','','o'],
    marker_fill: "color",
    line_color: [
        "red",
        "limegreen",
        "magenta",
        "black",
        "blue"
    ],
    line_style: ["-", ":", "--", "-."],
    ],
    line_interpolation: [
        "monotone",
        "step",
        "cardinal",
        "basis",
        "linear"
    ],
    interactive_options: {
        line: false,
        dots: false,
        textbox: false,
    }
};`;

                   $('pre#code').html(code)
                        .removeClass("prettyprinted");

                    prettyPrint();

                    plt.svg.removeAll();
                    plt = d3lines.plot(svg, options);
                    break;

            default:
                break;
        }

        $('pre.prettyprinted').not('#code').css({
            "border": "none",
            "background-color": "rgb(140, 210, 170)",
            "font-size": "0.8em"
        });
    }

    $('.example-menu ul li a').click(function(){
        var parent = $(this).parent();
        if (!parent.hasClass("selected-menu")){
            $(".selected-menu").removeClass("selected-menu");
            parent.addClass("selected-menu");
            var dataID = $(this).data('id');
            loadChart(dataID);
        }
    });

    $('.arrow').click(function(){
      var arrowDir = $(this).children('i');
      if (arrowDir.hasClass("down") && ticking != true) {
          //Down scroll
          ticking = true;
          fromTop = false;
          if (currentSlideNumber !== totalSlideNumber - 1) {
            currentSlideNumber++;
            nextItem();
          }
          slideDurationTimeout(slideDurationSetting);
      } else if (arrowDir.hasClass("up") && ticking != true) {
          //Up scroll
          ticking = true;
          console.log(fromTop, currentSlideNumber)
          if (currentSlideNumber !== 0) {
            if (fromTop){
                currentSlideNumber = 0;
            } else {
                currentSlideNumber--;
            }
          }
          console.log(fromTop, currentSlideNumber)

          previousItem();
          slideDurationTimeout(slideDurationSetting);
        }
    });

    $('.examples').click(function(){
      if (ticking != true) {
          ticking = true;
          fromTop = true;
          currentSlideNumber = 2;
          $(".background").eq(0).removeClass("up-scroll").addClass("down-scroll");
          $(".background").eq(1).removeClass("up-scroll").addClass("down-scroll");
          slideDurationTimeout(slideDurationSetting);
      }
    });

    $('.installation').click(function(){
      if (ticking != true) {
          ticking = true;
          fromTop = true;
          currentSlideNumber = 3;
          $(".background").eq(0).removeClass("up-scroll").addClass("down-scroll");
          $(".background").eq(1).removeClass("up-scroll").addClass("down-scroll");
          $(".background").eq(2).removeClass("up-scroll").addClass("down-scroll");
          slideDurationTimeout(slideDurationSetting);
      }
    });


    loadChart(0);
    // d3lines.plot(svg, {data: [5,7,9,23,4,6,3,5,7,8], line_interpolation: "cardinal", marker: 'o', marker_fill: "color"})
});

</script>

</html>
