var d3lines=function(){function t(t){return void 0!==t&&null!==t}function e(t){return!isNaN(parseFloat(t))&&isFinite(t)}function a(t){try{var e=new Date(t);if(isNaN(e.getTime()))return;return e}catch(a){return}}function r(t){return"[object Array]"==Object.prototype.toString.call(t)}function n(e,a,r){if(!t(e))return r;if(!e.hasOwnProperty(a))return r;var n=e[a];return delete e[a],n}function i(t){return e(t)?"float":r(t)?"array":typeof t}function o(e){if(!t(e))return void(this.data=e);var a=i(e);if("array"===a){if(0!=e.length){var n=i(e[0]),o=e.reduce(function(t,e){return t&&i(e)===n});if(!o)throw TypeError("Data has mixed types");if("object"===n)this.data=e;else if("array"===n){var l=[];e.forEach(function(t,e){l.push({}),t.forEach(function(t,a){l[e]["y"+(a+1)]=t})}),this.data=l}else{if("float"!==n)throw TypeError("Data type is not supported");var l=[];e.forEach(function(t){l.push({y:t})}),this.data=l}}}else{if("object"!==a)throw TypeError("Data type is not supported");var s,l=[],y=Object.keys(e);y.forEach(function(t,a){if(!r(e[t]))throw TypeError("Data type is not supported");if(0===a)s=e[t].length;else if(e[t].length!==s)throw TypeError("Inconsistent number of elements for different keys");e[t].forEach(function(e,r){0===a&&l.push({}),l[r][t]=e})}),this.data=l}}function l(e,a,r,n){return d3.svg.line().x(function(t,a){return e(n.hasOwnProperty("xkey")?t[n.xkey]:a)}).y(function(e,i){return n.hasOwnProperty("ykey")?a(e[n.ykey]):n.hasOwnProperty("y2key")&&t(r)?r(e[n.y2key]):a(i)})}function s(t,e,a,r){return t.append("line").attr("x1",a(e)).attr("y1",r.range()[0]).attr("x2",a(e)).attr("y2",r.range()[1])}function y(t,e,a,r){return t.append("line").attr("x1",a.range()[0]).attr("y1",r(e)).attr("x2",a.range()[1]).attr("y2",r(e))}function c(t){return t.each(function(){var t=d3.select(this),e={},a=d3.select(t.property("nearestViewportElement")),r=parseFloat(t.attr("data-style-padding")||5);lb=t.selectAll(".legend-box").data([!0]),lb.enter().append("rect").classed("legend-box",!0),a.selectAll("[data-legend]").each(function(){var t=d3.select(this);e[t.attr("data-legend")]={pos:t.attr("data-legend-pos")||this.getBBox().y,line_color:"none"!==t.attr("data-line-color")?t.attr("data-line-color"):t.attr("data-line-fill"),line_width:t.attr("data-line-width"),line_style:t.attr("data-line-style"),marker:t.attr("data-marker"),marker_fill:t.attr("data-marker-fill"),marker_size:t.attr("data-marker-size"),marker_stroke_width:t.attr("data-marker-stroke-width"),symbol:""!==h(t.attr("data-marker"),36)?h(t.attr("data-marker"),36)():null}}),e=d3.entries(e).sort(function(t,e){return t.value.pos-e.value.pos});var n=t.append("g").attr("class","legend-items"),i=parseFloat(window.getComputedStyle(n[0][0]).getPropertyValue("font-size")),o=n.selectAll("g").data(e),l=o.enter().append("g").attr("transform",function(t,e){return"translate(0, "+1.2*e*i+")"});l.append("line").attr("x2","1.5em").attr("y1","-0.38em").attr("y2","-0.38em").style("fill","none").style("stroke",function(t){return t.value.line_color}).style("stroke-width",function(t){return t.value.line_width}).style("stroke-dasharray",function(t){return f(t.value.line_style)}),l.append("path").attr("d",function(t){return t.value.symbol}).attr("transform",function(t,e){return"translate("+.75*i+", "+-.38*i+")"}).style("stroke",function(t){return t.value.line_color}).style("fill",function(t){return"color"===t.value.marker_fill?t.value.line_color:t.value.marker_fill}).style("stroke-width",function(t){return t.value.marker_stroke_width}),l.append("text").attr("x","2em").text(function(t){return t.key});var s=n[0][0].getBBox();n.attr("transform","translate("+(-s.x+r)+","+(-s.y+r)+")"),lb.attr("x",0).attr("y",0).attr("height",s.height+2*r).attr("width",s.width+2*r)}),t}function d(a,n,i,o,l){if(e(o)){if(0>=o)throw"ValueError: `layoutType` should be a strictly positive number.";var s,y,c,d;if(t(a))switch(i){case"x":n.forEach(function(t){t.hasOwnProperty("xkey")?(s=d3.min([s,d3.min(a,function(e){return e[t.xkey]})]),y=d3.max([y,d3.max(a,function(e){return e[t.xkey]})])):(s=0,y=a.length)});break;case"y":n.forEach(function(t){t.hasOwnProperty("ykey")&&(s=d3.min([s,d3.min(a,function(e){return e[t.ykey]})]),y=d3.max([y,d3.max(a,function(e){return e[t.ykey]})]))});break;case"y2":n.forEach(function(t){t.hasOwnProperty("y2key")&&(s=d3.min([s,d3.min(a,function(e){return e[t.y2key]})]),y=d3.max([y,d3.max(a,function(e){return e[t.y2key]})]))})}else s=0,y=1;if(t(s)||(s=0),t(y)||(y=1),l.type!==z.LOG||s instanceof Date||y instanceof Date)if(l.type===z.LOG&&s instanceof Date&&y instanceof Date){if(0>s||0>y)throw"ValueError: Cannot use a logarithmic scale with negative data";var f=Math.log10(y.getTime())-Math.log10(s.getTime()),h=Math.log10(s)+f/2,p=f*o;c=new Date(Math.pow(10,h-p/2)),d=new Date(Math.pow(10,h+p/2))}else if(s instanceof Date&&y instanceof Date){var f=y.getTime()-s.getTime(),h=s.getTime()+f/2,p=f*o;c=new Date(h-p/2),d=new Date(h+p/2)}else{var f=y-s,h=s+f/2,p=f*o;c=h-p/2,d=h+p/2}else{if(0>s||0>y)throw"ValueError: Cannot use a logarithmic scale with negative data";var f=Math.log10(y)-Math.log10(s),h=Math.log10(s)+f/2,p=f*o;c=Math.pow(10,h-p/2),d=Math.pow(10,h+p/2)}}else{if(!r(o)||2!=o.length)throw TypeError("`layoutType` should be a strictly-positive float or a two-element float array");if(c=o[0],d=o[1],!e(c)||!e(d))throw TypeError("`layoutType` should be a two-element float array")}l.domain([c,d])}function f(t){switch(t){case":":case"dotted":return"1 1";case"-":case"solid":return"";case"--":case"dashed":return"3 3";case"-.":case"dash-dot":return"5 2 1 2";default:return t}}function h(t,e){switch(t){case"o":case"circle":return d3.svg.symbol().type("circle").size(e);case"+":case"cross":return d3.svg.symbol().type("cross").size(e);case"d":case"diamond":return d3.svg.symbol().type("diamond").size(e);case"s":case"square":return d3.svg.symbol().type("square").size(e);case"^":case"triangle-up":return d3.svg.symbol().type("triangle-up").size(e);case"v":case"triangle-down":return d3.svg.symbol().type("triangle-down").size(e);default:return""}}function p(t,e){return r(t)?t[e%t.length]:t}function u(e,a){var r={};if(t(e)&&Object.keys(e).forEach(function(t,a){r[t]=e[t]}),r.hasOwnProperty("color")||(r.color=p(Et,a)),r.hasOwnProperty("width")||(r.width=p(Pt,a)),r.hasOwnProperty("style")||(r.style=p(Tt,a)),r.hasOwnProperty("fill")||(r.fill=p(Nt,a)),r.hasOwnProperty("fill_opacity")||(r.fill_opacity=p(At,a)),r.hasOwnProperty("marker")||(r.marker=p(zt,a)),r.hasOwnProperty("marker_fill")||(r.marker_fill=p(It,a)),r.hasOwnProperty("marker_stroke_width")||(r.marker_stroke_width=p(jt,a)),r.hasOwnProperty("marker_size")||(r.marker_size=p(Lt,a)),!r.hasOwnProperty("ykey")&&!r.hasOwnProperty("y2key"))throw"Line does not have an `ykey` or `y2key` property. The `ykey` or `y2key` property should be the names of a field of all data element objects.";return r}function k(e,a,r,n){function i(t){return a.hasOwnProperty("xkey")&&isNaN(t[a.xkey])?!1:a.hasOwnProperty("ykey")&&isNaN(t[a.ykey])?!1:a.hasOwnProperty("y2key")&&isNaN(t[a.y2key])?!1:!0}var o=l(Mt.xscale,Mt.yscale,Mt.y2scale,a);if(o.defined(i),e.attr("d",o(Ft)),t(r)){var s=d3.svg.area().x(o.x()).y(o.y()).y0(Mt.yscale.range()[0]).defined(i);r.attr("d",s)}t(n)&&n.selectAll("path").attr("transform",function(t,e){return"translate("+o.x()(t,e)+","+o.y()(t,e)+")"})}function g(t,e,a){if(void 0===a)var a=function(t,e){return t};var r=0,n=a(e[0],0),i=Math.abs(t-n);return e.forEach(function(e,o){var l=a(e,o);Math.abs(l-t)<i&&(r=o,n=l,i=Math.abs(t-n))}),[e[r],r]}var m,x,_,w,v,b,O,E,P,T,N,A,z={LINEAR:"LINEAR",LOG:"LOG",TIME:"TIME"},I=!0,j=1e3,L=500,D={top:15,right:70,bottom:50,left:70},M="left",F=["#00F","#F00","#070","#F0F","#0FF","#000"],B=1.5,S="-",X="none",R=1,V="",Y="white",C="",G=8,U=!0,q=!1,W="#BBB",J=.5,H=":",K=!1,Q="#BBB",Z=.5,$=":",tt=!1,et="#BBB",at=.5,rt=":",nt=!0,it="0.875em",ot="white",lt=1,st="#777",yt=1,ct="-",dt="top left",ft=1,ht=1.05,pt=1.05,ut=0,kt=0,gt=0,mt="1em",xt="#777",_t=1,wt="none",vt=1,bt="-",Ot=!0;DEFAULT_INTERACTIVE_OPTIONS={snap_axis:"x",snap_key:"",line:!0,linestyle:"-",linewidth:1,linecolor:"#777",dots:!0,dot_radius:5,textbox:!0,box_color:"#ffb4b4",box_padding:10,box_opacity:.95,font_size:"1em",font_color:"black",font_family:"",output_string:function(t){var e=[];return Object.keys(t).forEach(function(a,r){e.push(a+": "+t[a])}),e.join("<br>")},zoom:!0};var Et,Pt,Tt,Nt,At,zt,It,jt,Lt,Dt,Mt={},Ft=[];return o.prototype.transpose=function(e){t(e)||(e="x");var a=this.data;if(t(a)){if(!r(a))throw TypeError("The data should be an array of dictionaries.");if(0!==a.length){var n,i=[];return a.forEach(function(t,r){n=t[""];var o=Object.keys(a[0]).filter(function(t){return""!==t.trim()});o.forEach(function(a,o){0===r&&(i.push({}),i[o][e]=a),i[o][n]=t[a]})}),new o(i)}}},o.prototype.sanitize=function(){var n=this.data;if(t(n)){if(!r(n))throw TypeError("The data should be an array of dictionaries.");if(0!==n.length){var i=Object.keys(n[0]).filter(function(t){return""!==t.trim()}),l=[];i.forEach(function(r){"object"==typeof n[0][r]?l.push("object"):e(n[0][r])||"string"==typeof n[0][r]&&""===n[0][r].trim()?l.push("float"):t(a(n[0][r]))?l.push("date"):l.push("string")});var s,y,c=[];return n.forEach(function(r){s={},y=!0,i.forEach(function(n,i){var o=l[i];switch(o){case"object":null==r[n]?s[n]=NaN:(s[n]=r[n],y=!1);break;case"string":case"float":e(r[n])?"string"==typeof r[n]&&""===r[n].trim()?s[n]=NaN:(s[n]=parseFloat(r[n]),y=!1):s[n]=NaN;break;case"date":var c=a(r[n]);t(c)?(s[n]=c,y=!1):s[n]=NaN}}),y||c.push(s)}),new o(c)}}},o.prototype.sample=function(e,a){var n=this.data;if(1==arguments.length?(a=e,e=0):0==arguments.length&&(e=0,a=5),t(n)){if(!r(n))throw TypeError("The data should be an array of dictionaries.");if(0!==n.length){var i=[],l=[];return n.forEach(function(t,r){0==r&&(l=Object.keys(n[0]).filter(function(t){return""!==t.trim()}));var o={};l.slice(e,a).forEach(function(e,a){o[e]=t[e]}),i.push(o)}),new o(i)}}},o.prototype.selectColumns=function(e){var a=this.data;if(t(a)){if(!r(a))throw TypeError("The data should be an array of dictionaries.");if(0!==a.length&&t(e)&&r(e)){var n=[],i=[];return a.forEach(function(t,r){0==r&&(i=Object.keys(a[0]).filter(function(t){return-1!=e.indexOf(t)}));var o={};i.forEach(function(e,a){o[e]=t[e]}),n.push(o)}),new o(n)}}},o.prototype.ignoreColumns=function(e){var a=this.data;if(t(a)){if(!r(a))throw TypeError("The data should be an array of dictionaries.");if(0!==a.length&&t(e)&&r(e)){var n=[],i=[];return a.forEach(function(t,r){0==r&&(i=Object.keys(a[0]).filter(function(t){return-1==e.indexOf(t)}));var o={};i.forEach(function(e,a){o[e]=t[e]}),n.push(o)}),new o(n)}}},o.prototype.filterColumns=function(e){var a=this.data;if(t(a)){if(!r(a))throw TypeError("The data should be an array of dictionaries.");if(0!==a.length){var n=[],i=[];return a.forEach(function(t,r){0==r&&(i=Object.keys(a[0]).filter(e));var o={};i.forEach(function(e,a){o[e]=t[e]}),n.push(o)}),new o(n)}}},{objects:Mt,isArray:r,isNumeric:e,hline:y,vline:s,Data:o,getData:function(){return Ft},plot:function(e,a){function i(e){oa=e;var a=e.pageX-We.offsetLeft,r=e.pageY-We.offsetTop,n=(a-Jt.left)/(qt-Jt.left-Jt.right),i=1-(r-Jt.top)/(Wt-Jt.top-Jt.bottom);if(t(ta)&&ta.style("display","none"),t(ea)&&ea.style("display","none"),t(na)&&t(ia)&&(na.style("display","none"),ia.style("display","none")),t(ra)&&ra.forEach(function(t){t.style("display","none")}),!(0>n||n>1||0>i||i>1)){if("x"==qe.snap_axis){var o=Ht.invert(a),l=qe.snap_key;if(""==l&&(l=Vt[0].xkey),t(l)){var s=g(o,Ft,function(t){return t[l]})[0];t(ta)&&ta.attr("x1",Ht(s[l])).attr("x2",Ht(s[l])).style("display","block"),t(ra)&&Vt.forEach(function(t,e){t.hasOwnProperty("xkey")&&isNaN(s[t.xkey])?ra[e].style("display","none"):t.hasOwnProperty("ykey")&&isNaN(s[t.ykey])?ra[e].style("display","none"):t.hasOwnProperty("y2key")&&isNaN(s[t.y2key])?ra[e].style("display","none"):(ra[e].attr("cx",Ht(s[t.xkey])),t.hasOwnProperty("ykey")?ra[e].attr("cy",Kt(s[t.ykey])):ra[e].attr("cy",Qt(s[t.y2key])),ra[e].style("display","block"))})}else{var y=g(o,Ft,function(t,e){return e});s=y[0],dataindex=y[1],t(ta)&&ta.attr("x1",Ht(dataindex)).attr("x2",Ht(dataindex)).style("display","block"),t(ra)&&Vt.forEach(function(t,e){t.hasOwnProperty("ykey")&&isNaN(s[t.ykey])?ra[e].style("display","none"):t.hasOwnProperty("y2key")&&isNaN(s[t.y2key])?ra[e].style("display","none"):(ra[e].attr("cx",Ht(dataindex)),t.hasOwnProperty("ykey")?ra[e].attr("cy",Kt(s[t.ykey])):ra[e].attr("cy",Qt(s[t.y2key])),ra[e].style("display","block"))})}}var c=qe.output_string(s);if(t(na)&&t(ia)){ia.text("");var d=parseFloat(getComputedStyle(ia[0][0]).fontSize);c.split(new RegExp("<br ?/?>")).forEach(function(t,e){ia.append("tspan").text(t).attr("x",a+10+qe.box_padding).attr("y",r+10+qe.box_padding+d).attr("dy",1.2*e+"em")}),ia.style("display","block");var f=ia[0][0].getBBox(),h=f.height+2*qe.box_padding,p=f.width+2*qe.box_padding;if(r+10>Wt-h){na.attr("y",Wt-h);var u=ia.selectAll("tspan");u.each(function(t,e){d3.select(u[0][e]).attr("y",Wt-h+qe.box_padding+d)})}else na.attr("y",r+10);if(a+10>qt-p){na.attr("x",qt-p);var u=ia.selectAll("tspan");u.each(function(t,e){d3.select(u[0][e]).attr("x",qt-p+qe.box_padding)})}else na.attr("x",a+10);na.attr("width",p).attr("height",h).style("display","block")}}}var k=0;if(t(a)&&"object"!=typeof a)throw TypeError("`options` should be an Object");var Bt={};if(t(a)&&Object.keys(a).forEach(function(t){Bt[t]=a[t]}),Ft=n(Bt,"data")){Ft instanceof o||(Ft=new o(Ft));var St=n(Bt,"data_sanitization",I);St&&(Ft=Ft.sanitize()),Ft=Ft.data}var Xt=n(Bt,"xkey"),Rt=n(Bt,"ykey");Dt=n(Bt,"line_yaxis",M),Et=n(Bt,"line_color",F),Pt=n(Bt,"line_width",B),Tt=n(Bt,"line_style",S),Nt=n(Bt,"line_fill",X),At=n(Bt,"line_fill_opacity",R),zt=n(Bt,"marker",V),It=n(Bt,"marker_fill",Y),jt=n(Bt,"marker_stroke_width",C),Lt=n(Bt,"marker_size",G);var Vt=[],Yt=[],Ct=[],Gt=[],Ut=[];if(t(Xt)&&(Yt.push(Xt),Ut.push(Xt)),t(Rt)&&(Ct.push(Rt),Ut.push(Rt)),t(Bt.lines)&&(Bt.lines.forEach(function(e){!e.hasOwnProperty("xkey")&&t(Xt)&&(e.xkey=Xt),e.hasOwnProperty("ykey")||e.hasOwnProperty("y2key")||!t(Rt)||(e.ykey=Rt);var a=u(e,k);k+=1,a.hasOwnProperty("xkey")&&-1==Ut.indexOf(a.xkey)&&(Yt.push(a.xkey),Ut.push(a.xkey)),a.hasOwnProperty("ykey")&&-1==Ut.indexOf(a.ykey)?(Ct.push(a.ykey),Ut.push(a.ykey)):-1==Ut.indexOf(a.y2key)&&(Gt.push(a.y2key),Ut.push(a.y2key)),Vt.push(a)}),delete Bt.lines),0==Vt.length&&t(Ft)){if(!r(Ft))throw TypeError("Wrong type for `data`");Object.keys(Ft[0]).forEach(function(e){var a=p(Dt,k);t(Xt)?e!=Xt&&("right"==a?Vt.push(u({xkey:Xt,y2key:e},k)):Vt.push(u({xkey:Xt,ykey:e},k)),k+=1):("right"==a?Vt.push(u({y2key:e},k)):Vt.push(u({ykey:e},k)),k+=1)})}if(Vt.length>0&&!t(Ft))throw TypeError("`data` is undefined.");if(Vt.length>0&&!r(Ft))throw TypeError("Wrong type for `data`");if(Vt.length>0&&0==Ft.length)throw new ValueError("`data` is empty");Vt.length>0&&Ft.forEach(function(t,e){Ut.forEach(function(a){if(!t.hasOwnProperty(a))throw"Missing key "+a+" in data element "+e})});var qt=n(Bt,"width",j),Wt=n(Bt,"height",L),Jt={};if(Object.keys(D).forEach(function(t,e){Jt[t]=D[t]}),t(Bt.margins)&&(Object.keys(Bt.margins).forEach(function(t,e){Jt[t]=Bt.margins[t]}),delete Bt.margins),qt<Jt.left+Jt.right)throw"ValueError: `width` should be larger than the sum of the left and right margins.";var Ht,Kt,Qt;t(Bt.xscale_type)?("time"==Bt.xscale_type?(Ht=d3.time.scale(),Ht.type=z.TIME):"log"==Bt.xscale_type?(Ht=d3.scale.log(),Ht.type=z.LOG):(Ht=d3.scale.linear(),Ht.type=z.LINEAR),delete Bt.xscale_type):(Ht=d3.scale.linear(),Ht.type=z.LINEAR),t(Bt.yscale_type)?("time"==Bt.yscale_type?(Kt=d3.time.scale(),Kt.type=z.TIME):"log"==Bt.yscale_type?(Kt=d3.scale.log(),Kt.type=z.LOG):(Kt=d3.scale.linear(),Kt.type=z.LINEAR),delete Bt.yscale_type):(Kt=d3.scale.linear(),Kt.type=z.LINEAR),t(Bt.y2scale_type)&&("time"==Bt.y2scale_type?(Qt=d3.time.scale(),Qt.type=z.TIME):"log"==Bt.y2scale_type?(Qt=d3.scale.log(),Qt.type=z.LOG):(Qt=d3.scale.linear(),Qt.type=z.LINEAR),delete Bt.y2scale_type),Vt.forEach(function(e){e.hasOwnProperty("y2key")&&!t(Qt)&&(Qt=d3.scale.linear(),Qt.type=z.LINEAR)});var Zt=n(Bt,"xticks",m),$t=n(Bt,"yticks",x),te=n(Bt,"y2ticks",_),ee=n(Bt,"xtick_format",w),ae=n(Bt,"ytick_format",v),re=n(Bt,"y2tick_format",b),ne=n(Bt,"box",U),ie=n(Bt,"xgrid",q),oe=n(Bt,"xgrid_color",W),le=n(Bt,"xgrid_width",J),se=n(Bt,"xgrid_linestyle",H),ye=n(Bt,"ygrid",K),ce=n(Bt,"ygrid_color",Q),de=n(Bt,"ygrid_width",Z),fe=n(Bt,"ygrid_linestyle",$),he=n(Bt,"y2grid",tt),pe=n(Bt,"y2grid_color",et),ue=n(Bt,"y2grid_width",at),ke=n(Bt,"y2grid_linestyle",rt),ge=n(Bt,"legend",nt),me=n(Bt,"legend_font_size",it),xe=n(Bt,"legend_font_color",O),_e=n(Bt,"legend_font_family",E),we=n(Bt,"legend_fill",ot),ve=n(Bt,"legend_fill_opacity",lt),be=n(Bt,"legend_border_color",st),Oe=n(Bt,"legend_border_width",yt),Ee=n(Bt,"legend_border_style",ct),Pe=n(Bt,"legend_position",dt),Te=n(Bt,"legend_labels"),Ne=n(Bt,"xlim",ft),Ae=n(Bt,"ylim",ht),ze=n(Bt,"y2lim",pt),Ie=n(Bt,"xlabel",P||Xt),je=n(Bt,"ylabel",T),Le=n(Bt,"y2label",N),De=n(Bt,"xlabel_offset",ut),Me=n(Bt,"ylabel_offset",kt),Fe=n(Bt,"y2label_offset",gt),Be=n(Bt,"axes_font_size",mt),Se=n(Bt,"axes_font_color",xt),Xe=n(Bt,"axes_font_family",A),Re=n(Bt,"axes_color",xt),Ve=n(Bt,"axes_width",_t),Ye=n(Bt,"axes_fill",wt),Ce=n(Bt,"axes_fill_opacity",vt),Ge=n(Bt,"axes_linestyle",bt),Ue=n(Bt,"interactive",Ot),qe={};Object.keys(DEFAULT_INTERACTIVE_OPTIONS).forEach(function(t,e){qe[t]=DEFAULT_INTERACTIVE_OPTIONS[t]}),t(Bt.interactive_options)&&(Object.keys(Bt.interactive_options).forEach(function(t,e){qe[t]=Bt.interactive_options[t]}),delete Bt.interactive_options),Object.keys(Bt).forEach(function(t){throw"ValueError: unknown key `"+t+"`"});var We=e[0][0];We.setAttribute("style","width:"+qt+"px; height:"+Wt+"px"),We.style.width=qt,We.style.height=Wt,Ht.range([Jt.left,qt-Jt.right]),d(Ft,Vt,"x",Ne,Ht),Kt.range([Wt-Jt.bottom,Jt.top]),d(Ft,Vt,"y",Ae,Kt),Mt.xscale=Ht,Mt.original_xscale=Ht.copy(),Mt.yscale=Kt,Mt.original_yscale=Kt.copy(),t(Qt)&&(Qt.range([Wt-Jt.bottom,Jt.top]),d(Ft,Vt,"y2",ze,Qt),Mt.y2scale=Qt,Mt.original_y2scale=Qt.copy()),e.append("clipPath").attr("id","clipPath").append("rect").attr("x",Jt.left).attr("y",Jt.top).attr("width",qt-Jt.left-Jt.right).attr("height",Wt-Jt.top-Jt.bottom);var Je=d3.svg.axis().scale(Ht);t(Zt)&&Je.ticks(Zt),t(ee)&&Je.tickFormat(ee);var He=d3.svg.axis().scale(Kt).orient("left");if(t($t)&&He.ticks($t),t(ae)&&He.tickFormat(ae),t(Qt)){var Ke=d3.svg.axis().scale(Qt).orient("right");t(te)&&Ke.ticks(te),t(re)&&Ke.tickFormat(re)}ne&&(Mt.box=e.append("rect").attr("x",Jt.left).attr("y",Jt.top).attr("width",qt-Jt.left-Jt.right).attr("height",Wt-Jt.top-Jt.bottom).attr("stroke","none").attr("fill",Ye).attr("fill-opacity",Ce)),Mt.lines=[],Mt.line_areas=[],Mt.line_markers=[],Mt.line_options=[];var Qe;if(Vt.forEach(function(a,r){function n(t){return a.hasOwnProperty("xkey")&&isNaN(t[a.xkey])?!1:a.hasOwnProperty("ykey")&&isNaN(t[a.ykey])?!1:a.hasOwnProperty("y2key")&&isNaN(t[a.y2key])?!1:!0}var i=l(Ht,Kt,Qt,a);i.defined(n),Mt.line_options.push(a);var o=a.color,s=a.width,y=a.style,c=a.fill,d=a.fill_opacity;if(Qe=a.hasOwnProperty("label")?a.label:t(Te)?p(Te,r):a.hasOwnProperty("ykey")?a.ykey:a.hasOwnProperty("y2key")?a.y2key:"","color"===c&&(c=o),"none"!=c){var u=d3.svg.area().x(i.x()).y(i.y()).y0(Kt.range()[0]).defined(n);Mt.line_areas.push(e.append("path").datum(Ft).attr("d",u).style("fill",c).style("fill-opacity",d).attr("clip-path","url(#clipPath)"))}else Mt.line_areas.push(null);if(Mt.lines.push(e.append("svg:path").attr("d",i(Ft)).attr("clip-path","url(#clipPath)").attr("data-legend",Qe).attr("data-line-color",o).attr("data-line-width",s).attr("data-line-style",y).attr("data-line-fill",c).attr("data-marker",a.marker).attr("data-marker-fill",a.marker_fill).attr("data-marker-stroke-width",a.marker_stroke_width).attr("data-marker-size",a.marker_size).attr("data-legend-pos",r).style("fill","none").style("stroke",o).style("stroke-width",s).style("stroke-dasharray",f(y))),""!=a.marker){var k=a.marker_fill;"color"==k&&(k=o),Mt.line_markers.push(e.append("g").attr("clip-path","url(#clipPath)")),Mt.line_markers[Mt.line_markers.length-1].selectAll(".markersymbols").data(Ft).enter().append("path").attr("d",h(a.marker,a.marker_size*a.marker_size)).attr("transform",function(t,e){return"translate("+i.x()(t,e)+","+i.y()(t,e)+")"}).style("stroke",o).style("fill",k).style("stroke-width",a.marker_stroke_width)}else Mt.line_markers.push(null)}),t(je)||1!==Vt.length||(je=Qe),ne&&(Mt.topline=y(e,Kt.domain()[1],Ht,Kt).style("stroke",Re).style("stroke-width",Ve).style("stroke-dasharray",f(Ge)),t(Qt)||(Mt.rightline=s(e,Ht.domain()[1],Ht,Kt).style("stroke",Re).style("stroke-width",Ve).style("stroke-dasharray",f(Ge)))),Mt.XAXIS=Je,Mt.xaxis=e.append("svg:g").attr("transform","translate(0,"+(Wt-Jt.bottom)+")").attr("class","d3axis d3_xaxis").call(Je),Mt.YAXIS=He,Mt.yaxis=e.append("svg:g").attr("transform","translate("+Jt.left+",0)").attr("class","d3axis d3_yaxis").call(He),t(Qt)&&(Mt.Y2AXIS=Ke,Mt.y2axis=e.append("svg:g").attr("transform","translate("+(qt-Jt.right)+",0)").attr("class","d3axis d3_y2axis").call(Ke)),d3.selectAll(".d3axis path").each(function(){var t=d3.select(this);t.style("fill","none").style("stroke",Re).style("stroke-width",Ve).style("stroke-dasharray",f(Ge))}),d3.selectAll(".d3axis line").each(function(){var t=d3.select(this);t.style("stroke",Re).style("stroke-width",Ve).style("stroke-dasharray",f(Ge))}),d3.selectAll(".d3axis text").each(function(){var t=d3.select(this);t.style("font-size",Be),void 0!==Se&&t.style("fill",Se),void 0!==Xe&&t.style("font-family",Xe)}),ie&&d3.selectAll(".d3_xaxis .tick").each(function(t,e){var a=d3.select(this);a.append("line").attr("y2",-Wt+Jt.bottom+Jt.top).attr("stroke",oe).attr("stroke-width",le).attr("stroke-dasharray",f(se))}),ye&&d3.selectAll(".d3_yaxis .tick").each(function(t,e){var a=d3.select(this);a.append("line").attr("x2",qt-Jt.left-Jt.right).attr("stroke",ce).attr("stroke-width",de).attr("stroke-dasharray",f(fe))}),t(Qt)&&he&&d3.selectAll(".d3_y2axis .tick").each(function(t,e){var a=d3.select(this);a.append("line").attr("x2",-qt+Jt.left+Jt.right).attr("stroke",pe).attr("stroke-width",ue).attr("stroke-dasharray",f(ke))}),t(Ie)&&(Mt.xlabel=e.append("text").attr("text-anchor","middle").attr("x",qt/2).attr("y",Wt+De-5).text(Ie).style("font-size",Be),void 0!==Se&&Mt.xlabel.style("fill",Se),void 0!==Xe&&Mt.xlabel.style("font-family",Xe)),t(je)&&(Mt.ylabel=e.append("text").attr("text-anchor","middle").attr("x",-Wt/2).attr("y",-Me).attr("dy",".75em").attr("transform","rotate(-90)").text(je).style("font-size",Be),void 0!==Se&&Mt.ylabel.style("fill",Se),void 0!==Xe&&Mt.ylabel.style("font-family",Xe)),t(Le)&&(Mt.y2label=e.append("text").attr("text-anchor","middle").attr("x",Wt/2).attr("y",-qt-Fe).attr("dy",".75em").attr("transform","rotate(90)").text(Le).style("font-size",Be),void 0!==Se&&Mt.y2label.style("fill",Se),void 0!==Xe&&Mt.y2label.style("font-family",Xe)),Vt.length>0&&Ue){var Ze=Ht.domain()[0],$e=(Ht.domain()[1],Kt.domain()[0]);Kt.domain()[1];if(n(qe,"line",!1)){var ta=s(e,Ze,Ht,Kt);ta.attr("stroke-dasharray",f(qe.linestyle)).attr("stroke",qe.linecolor).attr("stroke-width",qe.linewidth).style("display","none");var ea=y(e,$e,Ht,Kt);ea.attr("stroke-dasharray",f(qe.linestyle)).attr("stroke",qe.linecolor).attr("stroke-width",qe.linewidth).style("display","none")}if(n(qe,"dots",!1)){Mt.interactive_dots=[];var aa=e.append("g").attr("clip-path","url(#clipPath)");Vt.forEach(function(t,e){Mt.interactive_dots.push(aa.append("circle").attr("r",qe.dot_radius).attr("fill",t.color).style("display","none"))});var ra=Mt.interactive_dots}if(n(qe,"textbox",!1))var na=e.append("rect").attr("x",0).attr("y",0).attr("width",50).attr("height",50).attr("fill",qe.box_color).attr("fill-opacity",qe.box_opacity).style("display","none"),ia=e.append("text").attr("x",0).attr("y",0).style("display","none").style("fill",qe.font_color).style("font-size",qe.font_size).style("font-family",qe.font_family);var oa;if(We.addEventListener("mousemove",i),qe.zoom){var la=this;e.call(d3.behavior.zoom().x(Ht).y(Kt).on("zoom",function(){if(t(Qt)){var e=Kt.domain(),a=Mt.original_yscale(e[0]),r=Mt.original_yscale(e[1]),n=[];n.push(Mt.original_y2scale.invert(a)),n.push(Mt.original_y2scale.invert(r)),Qt.domain(n)}la.redraw(),i(oa)}))}}if(ge&&Vt.length>0){Mt.legend=e.append("g").attr("data-style-padding",10).style("font-size",me).call(c),Mt.legend.select("rect").style("fill",we).style("fill-opacity",ve).style("stroke",be).style("stroke-width",Oe).style("stroke-dasharray",f(Ee));var sa=Mt.legend.selectAll("rect")[0][0].getBBox(),ya=0,ca=0;if(r(Pe)&&2==Pe.length)ya=Pe[0],ca=Pe[1];else try{var da=JSON.parse(Pe);if(!r(da)){var fa="Invalid legend position (valid values are 'top left', 'top right', ... or 2-element arrays with the position (ex: [100, 200]))";throw console.log(fa),TypeError(fa)}if(2!=da.length)throw fa="Invalid legend position (valid values are 'top left', 'top right', ... or 2-element arrays with the position (ex: [100, 200]))",console.log(fa),TypeError(fa);ya=da[0],ca=da[1]}catch(ha){ya=-1==Pe.indexOf("right")?Jt.left+10:qt-Jt.right-sa.width-10,ca=-1==Pe.indexOf("bottom")?Jt.top+10:Wt-Jt.bottom-sa.height-10}Mt.legend.attr("transform","translate("+ya+","+ca+")"),void 0!==xe&&Mt.legend.selectAll("text").style("fill",xe),void 0!==_e&&Mt.legend.style("font-family",_e)}},redrawXAxis:function(){Mt.hasOwnProperty("xaxis")&&Mt.hasOwnProperty("XAXIS")&&Mt.xaxis.call(Mt.XAXIS)},redrawYAxis:function(){Mt.hasOwnProperty("yaxis")&&Mt.hasOwnProperty("YAXIS")&&Mt.yaxis.call(Mt.YAXIS)},redrawY2Axis:function(){Mt.hasOwnProperty("y2axis")&&Mt.hasOwnProperty("Y2AXIS")&&Mt.y2axis.call(Mt.Y2AXIS)},redrawLines:function(){if(Mt.hasOwnProperty("lines")&&Mt.hasOwnProperty("line_options")&&Mt.hasOwnProperty("line_areas")&&Mt.hasOwnProperty("line_markers")&&Mt.line_options.length===Mt.lines.length&&Mt.line_areas.length===Mt.lines.length&&Mt.line_markers.length===Mt.lines.length){var t=Mt.lines;t.forEach(function(t,e){k(t,Mt.line_options[e],Mt.line_areas[e],Mt.line_markers[e])})}},redraw:function(){this.redrawXAxis(),this.redrawYAxis(),this.redrawY2Axis(),this.redrawLines()},resetPlot:function(){Mt.hasOwnProperty("original_xscale")&&Mt.hasOwnProperty("xscale")&&Mt.xscale.domain([Mt.original_xscale.domain()[0],Mt.original_xscale.domain()[1]]),Mt.hasOwnProperty("original_yscale")&&Mt.hasOwnProperty("yscale")&&Mt.yscale.domain([Mt.original_yscale.domain()[0],Mt.original_yscale.domain()[1]]),Mt.hasOwnProperty("original_y2scale")&&Mt.hasOwnProperty("y2scale")&&Mt.y2scale.domain([Mt.original_y2scale.domain()[0],Mt.original_y2scale.domain()[1]]),this.redraw()}}}();